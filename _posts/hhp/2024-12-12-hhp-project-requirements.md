---
layout: single
title: "[항해+] 프로젝트 소개"
categories: 
 - Hhp
date: 2024-12-12 11:45:30:00 +0900
---

# 1️⃣ 들어가기

해당 주제는 항해플러스에서 주어진 주제 중 대용량 트래픽을 고려한 ‘콘서트 예약 서비스 구축’ 프로젝트이다. 

해당 프로젝트를 선택하려는 주요 포인트가 있다. 

1. 100만건 이상의 트래픽에도 서버 부하를 낮추기 위한 시도
2. 동시성 이슈를 처리
3. 대기열을 설계 방향 고민
4. 예약 프로세스 고민

 <br>

# 2️⃣ 프로젝트 설명

## 프로젝트 주제

대용량 트래픽을 고려한 콘서트 예약 서비스 구축

## 설명

- 공연 좌석을 예매하는 서비스이다.
- 공연의 예약 가능한 일자와 좌석을 선택하고, 결재까지 진행한다.
- 대기열 시스템을 통해 예약 가능한 사용자만이 예매를 진행할 수 있도록 한다.
- 결제는 충전된 금액을 통해 결제가 진행된다.
- 결제 및 예매는 내역을 남긴다.
- 좌석 예약 요청시 결제가 이루어지지 않더라도, 예약으로 선점한 좌석은 다른 사용자가 에약할 수 없다.
- 오랜 시간동안 결제가 이루어 지지 않은 사용자는 예약이 취소되고 다시한번 대기열에 서게 된다. (evict 전략)

## 요구사항

- 사용자 토큰 발급 API
- 공연/스케쥴/좌석을 조회할 수 있는 API
- 좌석 예약 API
- 잔액 충전 / 조회 API
- 결제 API
- 다수의 인스턴스로 어플리케이션이 동작하도록 고려
- 동시성 이슈를 고려하여 구현합니다.
- 100만명 이상의 사용자가 동시에 접속 하더라도 시스템에 장애가 발생하지 않게 구현

## API 요구사항 상세

1️⃣  **`주요` 유저 대기열 토큰 기능**

- 예약 서비스를 이용하기 위해서는 고유의 토큰을 발급받아야 한다.
- 어플리케이션에서 수용가능한 사용자를 기준으로 대기열에 사용자를 대기하여야 한다.
- 토큰 자체의 유효시간이 존재한다.(요청이 없는 사용자는 일정 시간 후에 evict한다.)
- 토큰은 인증과는 다르며, 예약 요청의 과부하를 예방하기 위한 혼잡제어용도의 수단이다.
- 충전과 잔액확인과 같은 API는 토큰검증이 필요없다.

**2️⃣  **`기본`** 예약 가능 날짜 / 좌석 API**

- 예약가능한 날짜와 해당 날짜의 좌석을 조회하는 API 를 각각 작성합니다.
- 예약 가능한 날짜 목록을 조회할 수 있습니다.
- 날짜 정보를 입력받아 예약가능한 좌석정보를 조회할 수 있습니다.

> 좌석 정보는 1 ~ 50 까지의 좌석번호로 관리됩니다.
> 

3️⃣  **`기본`** **좌석 예약 요청 API**

- 날짜와 좌석 정보를 입력받아 좌석을 예약 처리하는 API 를 작성한다.
- 좌석 예약과 동시에 해당 좌석은 그 유저에게 약 5분간 임시 배정된다. ( 시간은 정책에 따라 자율적으로 정의합니다. )
- 배정 시간 내에 결제가 완료되지 않았다면 좌석에 대한 임시 배정은 해제되어야 한다.
- 배정 시간 내에는 다른 사용자는 예약할 수 없어야 한다.

4️⃣  **`기본`**  **잔액 충전 / 조회 API** ( 대기열 토큰 검증 x )

- 결제에 사용될 금액을 API 를 통해 충전하는 API 를 작성한다.
- 사용자 식별자 및 충전할 금액을 받아 잔액을 충전한다.
- 사용자 식별자를 통해 해당 사용자의 잔액을 조회한다.

5️⃣  **결제 API**

- 결제 처리하고 결제 내역을 생성하는 API 를 작성한다.
- 결제가 완료되면 해당 좌석의 소유권을 유저에게 배정하고 대기열 토큰을 만료시킨다.

# 3️⃣ 계획

여기까지는 해당 주제를 선택한 이유와 프로젝트에 대한 description을 적어보았다. 위 요구사항을 토대로 계획은 아래와 같다.

1. 프로젝트 관리를 위한 마일스톤 생성
2. 요구사항 분석 및 기능 명세
3. 간략한 도메인 설계
4. API 명세서 작성
5. 1단계 구현