---
layout: single
title: "[í•­í•´+] Redis"
categories: 
 - Hhp
date: 2024-12-15 11:45:30:00 +0900
---
## 1. ë ˆë””ìŠ¤ëŠ” ë¬´ì—‡ì¸ê°€?

â˜ğŸ»Â Key-Valueí˜•ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§„ NoSQL In-Memory ë°ì´í„°ë² ì´ìŠ¤ì´ë‹¤. 

- **ì¥ì **
    - ë¹„ì •í˜• ë°ì´í„°ì´ê¸° ë•Œë¬¸ì— ë ˆì´ì•„ì›ƒ ì •ì˜ê°€ í•„ìš”ì—†ë‹¤.
    - IN MEMORY í˜•ì‹ìœ¼ë¡œ ì†ë„ê°€ ë¹ ë¥´ë‹¤.
    - ë‹¤ì–‘í•œ ìë£Œêµ¬ì¡°ë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ë‹¤ì–‘í•œ ëª©ì ìœ¼ë¡œ ì´ìš© í•  ìˆ˜ ìˆë‹¤.

- ë‹¨ì 
    - IN MEMORY ì¦‰ ë¹„íœ˜ë°œì„±ì´ê¸° ë•Œë¬¸ì— ë°ì´í„°ê°€ ìœ ì‹¤ë  ìˆ˜ê°€ ìˆë‹¤.

ğŸ§‘â€ğŸ’»Â ë•Œë¬¸ì— ë³´í†µì€ ì„ì‹œì„± ë°ì´í„°ë¥¼ ê´€ë¦¬ ì €ì¥í•  ë•Œ ì‚¬ìš©ë˜ë©° ì£¼ë¡œ DB ìºì‹œë‚˜ ì„¸ì…˜ì €ì¥ìš©ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.

## 2. ë ˆë””ìŠ¤ì˜ ìë£Œêµ¬ì¡°?

ë ˆë””ìŠ¤ëŠ” String, List, Sets, SortedSets, Hashes, BitArrays, HyperLogLogs, Streamë“±ì˜ ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ë©°, ì£¼ë¡œ String, List, Sets, Sorted Sets ë“±ì„ ë§ì´ ì‚¬ìš©í•œë‹¤. 

## 3. String

Redisì—ì„œ ì œê³µí•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ typeìœ¼ë¡œ ìš°ë¦¬ê°€ ì•Œê³ ìˆëŠ” ì¼ë°˜ì ì¸ key-value ë°©ì‹ì„ ë”°ë¥´ê³  ìˆë‹¤.

keyì™€ value ëª¨ë‘ binary safe í•˜ê¸° ë•Œë¬¸ì— ì–´ë– í•œ íƒ€ì…ì˜ ë°ì´í„°ë¡œ í—ˆìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

incr, incrby, decr, decrby ë“±ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ê³µìš© ìì›ì— ëŒ€í•œ Thread safeë¥¼ ë³´ì¥í•˜ëŠ” Atomic Intergerë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
> set mykey somevalue
> get mykey
"somevalue"

> set counter 100
> incr counter
(integer) 101
> incr counter 
(integer) 102
> incrby counter 50
(integer) 152
```

## 4. Lists

ìë£Œêµ¬ì¡°ì˜ Linked Listì™€ ê°™ì€ í˜•íƒœì´ë©° element ì‚½ì… ì‚­ì œì— ëŒ€í•´ì„œëŠ” O(1)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤.

í•˜ì§€ë§Œ íŠ¹ì • indexì˜ ìë£Œë¥¼ íƒìƒ‰í•˜ëŠ”ë° ìˆì–´ì„œëŠ” O(N)ì˜ ì‹œê°„ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.

ì‚¬ìš©ë˜ëŠ” ëª…ë ¹ì–´ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

lpush : ì™¼ìª½ì—ì„œ ê°’ ì‚½ì…

rpush : ì˜¤ë¥¸ìª½ì—ì„œ ê°’ ì‚½ì…

lrange : ì™¼ìª½ë¶€í„° íŠ¹ì • ë²”ìœ„ ë°ì´í„° ë°˜í™˜ ex ) 1-10 â†’ 1ë¶€í„° 10 ì¸ë±ìŠ¤ê¹Œì§€ ê°’ë°˜í™˜ , 0, -1 â†’ 0ë²ˆì§¸ë¶€í„° ë§ˆì§€ë§‰ ê¹Œì§€ ë°˜í™˜

rpop: ê°€ì¥ ì˜¤ë¥¸ìª½ ë°ì´í„°ë¥¼ êº¼ë‚¸ë‹¤.

lpush, rpopì„ ì´ìš©í•˜ë©´ message queueì™€ ê°™ì€ êµ¬ì¡°ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.

ì†Œì…œë„¤íŠ¸ì›Œí¬ íƒ€ì„ë¼ì¸ë“±ì˜ ìë£Œêµ¬ì¡°ë¡œ ì‚¬ìš©ëœë‹¤.

```bash
> rpush mylist 10
(integer) 1
> rpush mylist 20 30 60
(integer) 4
> lrange mylist 0 -1
1) 10
2) 20
3) 30
4) 60

> lpush mylist "first".      # first ê¸€ìë¥¼ ì™¼ìª½ì—ì„œ ì‚½ì…
5
> rpop mylist                # ê°€ì¥ ì˜¤ë¥¸ìª½ì˜ ë°ì´í„°ë¥¼ POP
60
> lrange mylist 0 -1.        
1) "first" 
2) 10 
3) 20
4) 30
```

## 5. Sets

ì¤‘ë³µì´ í—ˆìš©ë˜ì§€ ì•Šê³ , ìˆœì„œê°€ ë³´ì¥ë˜ì§€ ì•ŠëŠ” String ì§‘í•© ìë£Œêµ¬ì¡°ì´ë‹¤.

ì¶”ê°€, ì‚­ì œ, ì¡°íšŒ ë“± ëª¨ë‘ ì‹œê°„ë³µì¡ë„ê°€ O(N) ì´ë‹¤.

set ê°„ ì°¨ì§‘í•©, í•©ì§‘í•©ë“±ì„ ì§€ì›

ëª…ë ¹ì–´

sadd : setsì— ë°ì´í„°ë¥¼ ì¶”ê°€í•œë‹¤.

smembers : setsì— ëª¨ë“  ë°ì´í„°ë¥¼ ì¶œë ¥í•œë‹¤.

spop, srandmembers: setsì˜ ë°ì´í„°ë¥¼ ëœë¤í•˜ê²Œ ì¶”ì¶œí•œë‹¤. 

íŠ¸ë˜í‚¹ì— ì‚¬ìš©ëœë‹¤. ë¸”ë¡œê·¸ì— ì ‘ì†í•œ IPì£¼ì†Œ ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬ ë“± ì¤‘ë³µì´ í—ˆìš©ë˜ì§€ ì•ŠëŠ” ë°ì´í„°ë¥¼ ìˆœì„œìƒê´€ì—†ì´ ê´€ë¦¬í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤.

```bash
> sadd myset 1 2 3
(integer) 3
> 
```

## 6. hashes

Redis Hashes ëŠ” Value ê°’ìœ¼ë¡œ ë˜ ë‹¤ë¥¸ key-valueë¥¼ ê°–ëŠ” í˜•íƒœì´ë‹¤.

```bash
> hmset key:1000 username john age 30
> hget key:1000 username
john
> hmget key:1000 username age
1) john
2) 30
> hgetall key:1000
1) username
2) john
3) age
4) 30
```

## 7. SortedSet

Sets ìë£Œêµ¬ì¡°ì— Score ê°’ì„ ì¶”ê°€í•˜ì—¬ Scoreê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ëœ í˜•íƒœë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ìë£Œêµ¬ì¡°ì´ë‹¤. 

ê¸°ì¡´ Setsì™€ ë™ì¼í•˜ê²Œ Setsì˜ ê°’ì€ ì¤‘ë³µê°’ì„ í—ˆìš©í•˜ì§€ ì•Šì§€ë§Œ ScoreëŠ” ì¤‘ë³µê°’ì´ í—ˆìš©ëœë‹¤.

```bash
> zadd hackers 1940 "Alan Kay" # sorted Sets ìë£Œêµ¬ì¡°ë¡œ ì¶”ê°€
(integer) 1
> zadd hackers 1957 "Sophie Wilson"
(integer) 1
> zadd hackers 1953 "Richard Stallman"
(integer) 1
> zadd hackers 1949 "Anita Borg"
(integer) 1
> zadd hackers 1965 "Yukihiro Matsumoto"
(integer) 1
> zadd hackers 1914 "Hedy Lamarr"
(integer) 1
> zadd hackers 1916 "Claude Shannon"
(integer) 1
> zadd hackers 1969 "Linus Torvalds"
(integer) 1
> zadd hackers 1912 "Alan Turing"
(integer) 1
> zrange hackers 0 -1 # scoreë¥¼ í†µí•œ ë²”ìœ„ ê²€ìƒ‰
1) "Alan Turing"
2) "Hedy Lamarr"
3) "Claude Shannon"
4) "Alan Kay"
5) "Anita Borg"
6) "Richard Stallman"
7) "Sophie Wilson"
8) "Yukihiro Matsumoto"
9) "Linus Torvalds"
```

ìì„¸í•œ ë‚´ìš©ê³¼ ì‚¬ìš©ê°€ëŠ¥í•œ ëª…ë ¹ì–´ë“¤ì€ ì•„ë˜ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ 

[https://inpa.tistory.com/entry/REDIS-ğŸ“š-ë°ì´í„°-íƒ€ì…Collection-ì¢…ë¥˜-ì •ë¦¬](https://inpa.tistory.com/entry/REDIS-%F0%9F%93%9A-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%83%80%EC%9E%85Collection-%EC%A2%85%EB%A5%98-%EC%A0%95%EB%A6%AC)